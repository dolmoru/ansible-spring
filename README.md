# ansible-spring
Предназначен для развертывания веб-сервиса Spring Boot с использованием maven на ОС CentOS 7

Состоит из ролей:
 - common - базовая подготовка системы, обновление пакетов, установка репозитория epel..
 - spring - установка веб-сервиса из git репозитория.
 - nginx - настройка веб-прокси для сервиса spring boot.
 
 Поддерживается 3 режима работы плейбука( переменная spring_action):
  - install - Первоначальная установка веб-сервиса. Если указать в переменной spring_app_repo_release релиз, то будет установлена соответствующая версия (git tag)
  
  - update - Обновление версии. Если переменная spring_app_repo_release не задана, обновление происходит из последнего коммита ветки master
    
  - rollback - Откат на предыдущую установленную версию веб-сервиса.
    
 Перед запуском необходимо указать в файле group_vars/main.yml значения переменных:
 spring_action: (install|update|rollback) какое действие необходимо выполнить.
 
 spring_app_name: имя приложения(будет использовано для имени сервиса systemd, файла конфигурации nginx)
 
 spring_app_dir: каталог установки веб-сервиса
 
 spring_app_port: номер порта для работы веб-сервиса
 
 spring_app_repo: адрес git репозитория
 
 spring_app_user spring_app_group пользователь, от имени которого будет запускаться сервис.
 
